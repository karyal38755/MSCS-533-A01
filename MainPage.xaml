<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:maps="clr-namespace:Microsoft.Maui.Controls.Maps;assembly=Microsoft.Maui.Controls.Maps"
             xmlns:controls="clr-namespace:LocationTrackerApp.Controls"
             x:Class="LocationTrackerApp.MainPage"
             Title="Location Tracker">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header with app title and status -->
        <StackLayout Grid.Row="0" Padding="10" BackgroundColor="{StaticResource Primary}">
            <Label Text="Location Tracker" 
                   FontSize="20" 
                   FontAttributes="Bold" 
                   TextColor="White" 
                   HorizontalOptions="Center" />
            <Label x:Name="StatusLabel" 
                   Text="Ready to track location" 
                   FontSize="14" 
                   TextColor="White" 
                   HorizontalOptions="Center" />
        </StackLayout>

        <!-- Main map view -->
        <Grid x:Name="MapContainer" Grid.Row="1" />

        <!-- Control panel -->
        <StackLayout Grid.Row="2" Padding="10" BackgroundColor="LightGray" Spacing="10">
            
            <!-- Tracking controls -->
            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="10">
                <Button x:Name="StartTrackingButton" 
                        Text="Start Tracking" 
                        BackgroundColor="Green" 
                        TextColor="White"
                        Clicked="OnStartTrackingClicked" />
                <Button x:Name="StopTrackingButton" 
                        Text="Stop Tracking" 
                        BackgroundColor="Red" 
                        TextColor="White"
                        Clicked="OnStopTrackingClicked" 
                        IsEnabled="False" />
                <Button x:Name="GetCurrentLocationButton" 
                        Text="Get Current" 
                        BackgroundColor="Blue" 
                        TextColor="White"
                        Clicked="OnGetCurrentLocationClicked" />
            </StackLayout>

            <!-- Heat map controls -->
            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="10">
                <Button x:Name="LoadDataButton" 
                        Text="Load Data" 
                        BackgroundColor="Purple" 
                        TextColor="White"
                        Clicked="OnLoadDataClicked" />
                <Button x:Name="ClearDataButton" 
                        Text="Clear Data" 
                        BackgroundColor="Orange" 
                        TextColor="White"
                        Clicked="OnClearDataClicked" />
                <Button x:Name="ToggleHeatMapButton" 
                        Text="Toggle Heat Map" 
                        BackgroundColor="DarkBlue" 
                        TextColor="White"
                        Clicked="OnToggleHeatMapClicked" />
            </StackLayout>

            <!-- Statistics display -->
            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="20">
                <Label x:Name="DataPointCountLabel" 
                       Text="Data Points: 0" 
                       FontSize="12" 
                       VerticalOptions="Center" />
                <Label x:Name="TrackingStatusLabel" 
                       Text="Status: Stopped" 
                       FontSize="12" 
                       VerticalOptions="Center" />
            </StackLayout>

            <!-- Heat map settings -->
            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="10">
                <Label Text="Intensity:" VerticalOptions="Center" FontSize="12" />
                <Slider x:Name="IntensitySlider" 
                        Minimum="0.1" 
                        Maximum="3.0" 
                        Value="1.0" 
                        WidthRequest="100"
                        ValueChanged="OnIntensityChanged" />
                <Label x:Name="IntensityLabel" 
                       Text="1.0" 
                       FontSize="12" 
                       VerticalOptions="Center" 
                       WidthRequest="30" />
            </StackLayout>

            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="10">
                <Label Text="Radius:" VerticalOptions="Center" FontSize="12" />
                <Slider x:Name="RadiusSlider" 
                        Minimum="50" 
                        Maximum="500" 
                        Value="100" 
                        WidthRequest="100"
                        ValueChanged="OnRadiusChanged" />
                <Label x:Name="RadiusLabel" 
                       Text="100m" 
                       FontSize="12" 
                       VerticalOptions="Center" 
                       WidthRequest="40" />
            </StackLayout>

            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="10">
                <Label Text="Opacity:" VerticalOptions="Center" FontSize="12" />
                <Slider x:Name="OpacitySlider" 
                        Minimum="0.1" 
                        Maximum="1.0" 
                        Value="0.6" 
                        WidthRequest="100"
                        ValueChanged="OnOpacityChanged" />
                <Label x:Name="OpacityLabel" 
                       Text="0.6" 
                       FontSize="12" 
                       VerticalOptions="Center" 
                       WidthRequest="30" />
            </StackLayout>

        </StackLayout>
    </Grid>

</ContentPage>
